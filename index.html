<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Loja Exemplo</title>
<style>
  /* Seu CSS aqui (mantive o essencial para funcionamento do modal e layout) */
  body {
    font-family: Arial, sans-serif;
    margin: 0; padding: 0;
  }
  #productsGrid {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
    gap: 16px;
    padding: 20px;
  }
  .product-card {
    border: 1px solid #ccc;
    padding: 10px;
    border-radius: 6px;
    text-align: center;
    background: #fff;
  }
  .product-card img {
    width: 100%;
    max-height: 150px;
    object-fit: cover;
    cursor: pointer;
    border-radius: 4px;
  }
  .product-info h3 {
    margin: 10px 0 5px;
  }
  .product-info p {
    font-size: 0.9em;
    color: #555;
  }
  .price {
    font-weight: bold;
    margin: 8px 0;
  }
  .btn-add {
    background: #007bff;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 4px;
    cursor: pointer;
  }
  .btn-add:hover {
    background: #0056b3;
  }
  #cartPanel {
    position: fixed;
    top: 0; right: -320px;
    width: 300px;
    height: 100vh;
    background: #f9f9f9;
    border-left: 1px solid #ddd;
    box-shadow: -2px 0 5px rgba(0,0,0,0.1);
    transition: right 0.3s ease;
    padding: 20px;
    overflow-y: auto;
    z-index: 999;
  }
  #cartPanel.open {
    right: 0;
  }
  #btnOpenCart {
    position: fixed;
    top: 20px; right: 20px;
    background: #28a745;
    color: white;
    border: none;
    padding: 10px 16px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 18px;
    z-index: 1000;
  }
  #btnCloseCart {
    background: transparent;
    border: none;
    font-size: 24px;
    cursor: pointer;
    float: right;
  }
  #cartItems li {
    margin-bottom: 8px;
  }
  #cartTotal {
    font-weight: bold;
    margin-top: 15px;
    font-size: 1.1em;
  }

  /* Modal da imagem */
  #imageModal {
    display: none;
    position: fixed;
    z-index: 2000;
    left: 0; top: 0; width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.7);
    justify-content: center;
    align-items: center;
    padding: 20px;
  }
  #modalContent {
    background: white;
    border-radius: 8px;
    max-width: 400px;
    width: 100%;
    padding: 15px;
    text-align: center;
    position: relative;
  }
  #modalContent img {
    width: 100%;
    border-radius: 6px;
  }
  #modalClose {
    position: absolute;
    top: 10px; right: 15px;
    font-size: 24px;
    cursor: pointer;
    border: none;
    background: none;
  }
  #modalContent h3 {
    margin: 15px 0 8px;
  }
  #modalContent p {
    color: #555;
    margin-bottom: 10px;
  }
  #modalContent .price {
    font-weight: bold;
    margin-bottom: 15px;
  }
  #modalContent button {
    background: #007bff;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 4px;
    cursor: pointer;
  }
  #modalContent button:hover {
    background: #0056b3;
  }
</style>
</head>
<body>

<button id="btnOpenCart" title="Abrir carrinho">ðŸ›’</button>

<section id="productsGrid">
  <!-- Produtos serÃ£o renderizados aqui -->
</section>

<aside id="cartPanel">
  <button id="btnCloseCart" title="Fechar carrinho">&times;</button>
  <h2>Carrinho</h2>
  <ul id="cartItems"></ul>
  <div id="cartTotal">Total: 0,00 â‚¬</div>
</aside>

<!-- Modal da imagem com detalhes -->
<div id="imageModal">
  <div id="modalContent">
    <button id="modalClose" title="Fechar">&times;</button>
    <img id="modalImage" src="" alt="" />
    <h3 id="modalName"></h3>
    <p id="modalDescription"></p>
    <div class="price" id="modalPrice"></div>
    <button id="modalBuyBtn">Comprar</button>
  </div>
</div>

<script>
  // Seus produtos originais completos (8 produtos)
  const products = [
    {
      id: 1,
      name: "Vestido Floral",
      description: "Vestido leve e floral para dias quentes.",
      price: 120.00,
      image: "https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?auto=format&fit=crop&w=500&q=80"
    },
    {
      id: 2,
      name: "Camiseta BÃ¡sica",
      description: "Camiseta confortÃ¡vel, 100% algodÃ£o.",
      price: 45.50,
      image: "https://images.unsplash.com/photo-1521334884684-d80222895322?auto=format&fit=crop&w=500&q=80"
    },
    {
      id: 3,
      name: "Bermuda Jeans",
      description: "Bermuda jeans estilosa e resistente.",
      price: 98.90,
      image: "https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=500&q=80"
    },
    {
      id: 4,
      name: "Blusa Estampada",
      description: "Blusa com estampa moderna para o verÃ£o.",
      price: 79.90,
      image: "https://images.unsplash.com/photo-1521334884684-d80222895322?auto=format&fit=crop&w=500&q=80"
    },
    {
      id: 5,
      name: "CalÃ§a Casual",
      description: "CalÃ§a casual confortÃ¡vel para o dia a dia.",
      price: 110.00,
      image: "https://images.unsplash.com/photo-1495121605193-b116b5b09a3e?auto=format&fit=crop&w=500&q=80"
    },
    {
      id: 6,
      name: "TÃªnis Esportivo",
      description: "TÃªnis confortÃ¡vel para atividades esportivas.",
      price: 130.00,
      image: "https://images.unsplash.com/photo-1519741491402-f80301b43797?auto=format&fit=crop&w=500&q=80"
    },
    {
      id: 7,
      name: "Jaqueta Jeans",
      description: "Jaqueta jeans clÃ¡ssica para qualquer estaÃ§Ã£o.",
      price: 150.00,
      image: "https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?auto=format&fit=crop&w=500&q=80"
    },
    {
      id: 8,
      name: "Saia Plissada",
      description: "Saia plissada elegante para ocasiÃµes especiais.",
      price: 85.00,
      image: "https://images.unsplash.com/photo-1503341455253-b2e723bb3dbb?auto=format&fit=crop&w=500&q=80"
    }
  ];

  // Elementos DOM
  const productsGrid = document.getElementById('productsGrid');
  const cartPanel = document.getElementById('cartPanel');
  const btnOpenCart = document.getElementById('btnOpenCart');
  const btnCloseCart = document.getElementById('btnCloseCart');
  const cartItemsEl = document.getElementById('cartItems');
  const cartTotalEl = document.getElementById('cartTotal');

  const imageModal = document.getElementById('imageModal');
  const modalImage = document.getElementById('modalImage');
  const modalName = document.getElementById('modalName');
  const modalDescription = document.getElementById('modalDescription');
  const modalPrice = document.getElementById('modalPrice');
  const modalClose = document.getElementById('modalClose');
  const modalBuyBtn = document.getElementById('modalBuyBtn');

  // Estado do carrinho
  let cart = [];

  // Formatador de preÃ§o em Euros
  function formatPrice(price) {
    return price.toLocaleString('pt-PT', { style: 'currency', currency: 'EUR' });
  }

  // Renderiza os produtos na grade
  function renderProducts() {
    productsGrid.innerHTML = '';
    products.forEach(prod => {
      const card = document.createElement('article');
      card.className = 'product-card';
      card.innerHTML = `
        <img src="${prod.image}" alt="${prod.name}" data-id="${prod.id}" class="product-image" />
        <div class="product-info">
          <h3>${prod.name}</h3>
          <p>${prod.description}</p>
          <div class="price">${formatPrice(prod.price)}</div>
          <button class="btn-add" data-id="${prod.id}">Adicionar ao carrinho</button>
        </div>
      `;
      productsGrid.appendChild(card);
    });
  }

  // Atualiza visual do carrinho
  function updateCart() {
    cartItemsEl.innerHTML = '';
    if (cart.length === 0) {
      cartItemsEl.innerHTML = '<li>O seu carrinho estÃ¡ vazio.</li>';
      cartTotalEl.textContent = 'Total: 0,00 â‚¬';
      return;
    }
    let total = 0;
    cart.forEach(item => {
      const prod = products.find(p => p.id === item.id);
      const subtotal = prod.price * item.quantity;
      total += subtotal;
      const li = document.createElement('li');
      li.textContent = `${prod.name} x ${item.quantity} - ${formatPrice(subtotal)}`;
      cartItemsEl.appendChild(li);
    });
    cartTotalEl.textContent = `Total: ${formatPrice(total)}`;
  }

  // Adiciona produto ao carrinho
  function addToCart(id) {
    const idx = cart.findIndex(item => item.id === id);
    if (idx > -1) {
      cart[idx].quantity++;
    } else {
      cart.push({ id: id, quantity: 1 });
    }
    updateCart();
  }

  // Abrir modal com detalhes do produto
  function openModal(id) {
    const prod = products.find(p => p.id === id);
    modalImage.src = prod.image;
    modalImage.alt = prod.name;
    modalName.textContent = prod.name;
    modalDescription.textContent = prod.description;
    modalPrice.textContent = formatPrice(prod.price);
    modalBuyBtn.setAttribute('data-id', prod.id);
    imageModal.style.display = 'flex';
  }

  // Fechar modal
  function closeModal() {
    imageModal.style.display = 'none';
  }

  // Event listeners

  // Abrir carrinho
  btnOpenCart.addEventListener('click', () => {
    cartPanel.classList.add('open');
  });

  // Fechar carrinho
  btnCloseCart.addEventListener('click', () => {
    cartPanel.classList.remove('open');
  });

  // Clique para adicionar ao carrinho no botÃ£o
  productsGrid.addEventListener('click', e => {
    if (e.target.classList.contains('btn-add')) {
      const id = Number(e.target.getAttribute('data-id'));
      addToCart(id);
    }
  });

  // Clique na imagem abre modal com detalhes
  productsGrid.addEventListener('click', e => {
    if (e.target.classList.contains('product-image')) {
      const id = Number(e.target.getAttribute('data-id'));
      openModal(id);
    }
  });

  // Fechar modal botÃ£o
  modalClose.addEventListener('click', closeModal);

  // Fechar modal clicando fora do conteÃºdo
  imageModal.addEventListener('click', e => {
    if (e.target === imageModal) {
      closeModal();
    }
  });

  // BotÃ£o comprar do modal adiciona ao carrinho e fecha modal
  modalBuyBtn.addEventListener('click', () => {
    const id = Number(modalBuyBtn.getAttribute('data-id'));
    addToCart(id);
    closeModal();
  });

  // Inicializar
  renderProducts();
  updateCart();

</script>

</body>
</html>

